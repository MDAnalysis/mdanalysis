name: Mypy CI
on:
  push:
    branches:
      - develop
      - master
  pull_request:
    branches:
      - develop
      - master

concurrency:

  group: "${{ github.ref }}-${{ github.head_ref }}"
  cancel-in-progress: true

defaults:
  run:
    shell: bash -l {0}

jobs:
  mypy_test :
    if: "github.repository == 'MDAnalysis/mdanalysis'"
      runs-on: ubuntu-latest

      steps:
        - uses: actions/checkout@v2

        - name: setup_miniconda
          uses: conda-incubator/setup-miniconda@v2
          with:
            python-version: 3.7
            auto-update-conda: true
            channel-priority: flexible
            channels: conda-forge
            add-pip-as-python-dependency: true
            architecture: x64

        - name: "Install mypy"
            run: |
              python -m pip install mypy

        - name: "Run mypy"
            run: |
              mypy package/MDAnalysis/
